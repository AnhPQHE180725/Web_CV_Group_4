<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Top CV</title>
  <link rel="stylesheet" href="homepage.component.css" />
</head>

<body>
  <div class="slider-container">
    <div class="slider">
      <img *ngFor="let image of images; let i = index" [src]="image" class="slide" [class.active]="i === currentIndex"
        alt="Image slide {{ i + 1 }}" title="Image slide {{ i + 1 }}" />
    </div>
    <button class="prev" (click)="prevSlide()">&#10094;</button>
    <button class="next" (click)="nextSlide()">&#10095;</button>
  </div>

  <div class="dashboard-container">
    <div class="dashboard-header">
      <span class="icon">üìÖ</span>
      <span class="title">Th·ªëng k√™ h√¥m nay: {{ currentDate }}</span>
    </div>

    <div class="dashboard-content">
      <!-- Stats Row -->
      <div class="stats-row">
        <div class="dashboard-item">
          <p class="label">T·ªïng s·ªë c√¥ng ty</p>
          <p class="number">{{ totalCompanies | number }}</p>
        </div>

        <div class="dashboard-item">
          <p class="label">Vi·ªác l√†m ƒëang ·ª©ng</p>
          <p class="number">{{ totalRecruitments | number }}</p>
        </div>

        <div class="dashboard-item">
          <p class="label">T·ªïng s·ªë l∆∞·ª£t xem</p>
          <p class="number">{{ totalViews | number }}</p>
        </div>
      </div>

      <!-- List and Charts Row -->
      <div class="dashboard-details">
        <!-- Left: List of Recent Jobs -->
        <div class="dashboard-list">
          <h3>Vi·ªác l√†m hot nh·∫•t</h3>
          <ul>
            <li *ngFor="let job of recentJobs">
              <strong>{{ job.company }}</strong> - {{ job.title }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>Top Danh M·ª•c</h2>
    <div class="categories">
      <div class="category" *ngFor="let category of categories" [routerLink]="['/recruitment', 'category', category.id]"
        class="clickable">
        {{ category.name }}
      </div>
    </div>

    <h2>Top Doanh Nghi·ªáp</h2>
    <div class="companies">
      <div class="company" *ngFor="let company of companies">
        <!-- khi cty ng·ª´ng hoat ƒë·ªông th√¨ ko v√†o xem dc danh s√°ch c√°c b√†i ƒëƒÉng c·ªßa cty ƒë√≥, cty ph√° s·∫£n n√™n ko tuy·ªÉn n·ªØa -->
        <div class="company-content clickable"
          [routerLink]="company.status === 1 ? ['/recruitment', 'company', company.id] : null"
          [class.disabled]="company.status !== 1">
          <img [src]="company.logo" alt="{{ company.name }}" class="company-logo" />
          <span class="company-name">{{ company.name }}</span>
        </div>

        <!-- N√∫t Theo d√µi: ch·ªâ hi·ªÉn th·ªã khi status === 1 -->
        <button class="follow-btn" (click)="toggleCompanyFollow($event, company.id)"
          *ngIf="isLoggedIn() && isCandidate() && company.status === 1"
          [class.followed]="isCompanyFollowed(company.id)">
          {{ isCompanyFollowed(company.id) ? "B·ªè theo d√µi" : "Theo d√µi" }}
        </button>

        <!-- Th√¥ng b√°o c√¥ng ty t·∫°m ng·ª´ng cho c·∫£ ung vi√™n l·∫´n nh√† tuyen dung ƒë·ªÉ h·ªç bi·∫øt-->
        <p *ngIf="isLoggedIn() && isCandidate() && company.status !== 1 || isLoggedIn() && company.status !== 1"
          class="status-message">
          C√¥ng ty t·∫°m ng·ª´ng
        </p>
      </div>
    </div>

    <h2>Top B√†i ƒêƒÉng</h2>
    <div class="posts">
      <div class="post" *ngFor="let post of recruitments">
        <div>
          <img [src]="post.logo" alt="{{ post.companyName }}" class="company-logo" />
        </div>
        <strong>{{ post.type }}</strong>
        <p>{{ post.title }}</p>

        <div class="action-buttons">
          <!-- Hi·ªÉn th·ªã n√∫t "Y√™u th√≠ch" v√† "B·ªè y√™u th√≠ch" ch·ªâ khi ng∆∞·ªùi d√πng c√≥ role l√† candidate -->
          <button class="favorite-btn" (click)="toggleJobFollow($event, post.id)" *ngIf="isLoggedIn() && isCandidate()"
            [style.color]="isJobFollowed(post.id) ? 'inherit' : 'red'">
            <i class="fas" [ngClass]="{'fa-heart': isJobFollowed(post.id), 'fa-heart-o': !isJobFollowed(post.id)}"></i>
            {{ isJobFollowed(post.id) ? "B·ªè y√™u th√≠ch" : "Y√™u th√≠ch" }}
          </button>
          <!-- Hi·ªÉn th·ªã n√∫t "·ª®ng tuy·ªÉn" ch·ªâ khi ng∆∞·ªùi d√πng c√≥ role l√† candidate v√† b√†i tuy·ªÉn d·ª•ng ƒëang m·ªü (status === 1) -->
          <button class="apply-btn" (click)="onApply(post)" *ngIf="isLoggedIn() && isCandidate() && post.status === 1">
            <i class="fas fa-paper-plane"></i>
            ·ª®ng tuy·ªÉn
          </button>

          <button class="apply-btn" (click)="viewDetail(post)">
            <i></i>
            Xem chi ti·∫øt
          </button>
        </div>

        <small>{{ post.description }}</small>

        <div class="salary-box">
          <small>{{ post.salary }} tri·ªáu</small>
        </div>

        <!-- Hi·ªÉn th·ªã th√¥ng b√°o y√™u c·∫ßu ƒëƒÉng nh·∫≠p khi ch∆∞a ƒëƒÉng nh·∫≠p -->
        <p class="login-message" *ngIf="!isLoggedIn()">
          Vui l√≤ng <a routerLink="/login">ƒëƒÉng nh·∫≠p</a> ƒë·ªÉ ·ª©ng tuy·ªÉn
        </p>
      </div>
    </div>
  </div>
</body>